# V4.6 結局變體系統測試路線表

> **版本**：V4.6（結局變體版）  
> **測試日期**：2026-01-27  
> **測試重點**：驗證 18 種結局名稱/黑貓評論/遺物描述的動態顯示

---

## 測試前準備

### 1. 部署到 Google Apps Script
1. 開啟 Google Apps Script 專案
2. 複製 `靈魂食堂_田中太郎_五味料理版.gs` 的完整內容
3. 貼上並儲存
4. 部署 → 新增部署 → 網頁應用程式
5. 複製 Webhook URL 到 LINE Developers Console

### 2. 重置測試帳號
- 在 Google Sheets 中刪除測試用 userId 的那一列
- 或使用不同的 LINE 帳號測試

---

## 9 條測試路線

### ✅路線 A：苦味 + 缺席的典禮

**目標**：驗證「缺席的代價」結局

**操作步驟**：

1. **Day 1 - 收集苦味記憶**
   - 開始遊戲
   - 話題選擇：選「他怎麼來的？」（收集「雪」標籤）
   - 話題選擇：選「你的手」→ 延伸話題（收集「深夜閣樓」）
   - 選「做一碗熱湯」給他（苦味料理）

2. **Day 2 - 觸發缺席的典禮**
   - 話題選擇：選「那個夢」→ **選延伸話題「入學典禮」**（觸發 `缺席的典禮` 標籤）
   - 話題選擇：選其他苦味話題（如「怎麼死的」）
   - 選「苦辛醒神湯」（加強苦味）

3. **Day 3 - 驗證結局**
   - 進入最終章
   - 點「告別」

**預期結果**：
- ✅ 結局名稱：「缺席的代價」
- ✅ 黑貓評論：「缺席了一次，就缺席了一輩子。有些錯，沒有重來的機會。」
- ✅ 遺物描述：「那一年的缺席，成了永遠無法縫合的傷口。」
- ✅ 告別對話包含：「入學典禮那天我沒去...現在連婚禮也去不了了。」

---

### ✅路線 B：甜味 + 缺席的典禮

**目標**：驗證「扭曲的記憶」結局（最虐心的結局）

**操作步驟**：

1. **Day 1 - 收集甜味記憶**
   - 話題選擇：選「銀座生意好嗎？」→ 延伸話題（收集「銀座的驕傲」甜味標籤）
   - 選「不做料理」或「做一碗熱湯」

2. **Day 2 - 觸發缺席的典禮 + 甜味**
   - 話題選擇：選「那個夢」→ **選延伸話題「入學典禮」**（觸發 `缺席的典禮`）
   - 話題選擇：選「第一次叫爸爸」之類的甜味話題
   - 選「蜜汁燉菜」（加強甜味）

3. **Day 3 - 驗證結局**

**預期結果**：
- ✅ 結局名稱：「扭曲的記憶」
- ✅ 黑貓評論：「他把那天改寫了。也許是自我欺騙，也許是自我救贖。誰知道呢。」
- ✅ 遺物描述：「入學典禮的合照。那天陽光很好，我們都很開心。」
- ✅ 告別對話包含：「入學典禮...？啊，對了，那天她穿著制服，笑得好開心...」（偽造的記憶）

---

### ✅路線 C：平衡 + 缺席的典禮

**目標**：驗證「遲來的出席」結局

**操作步驟**：

1. **Day 1 - 收集混合記憶**
   - 選多個話題（甜苦混合）
   - 選「做一碗熱湯」

2. **Day 2 - 觸發缺席的典禮 + 平衡**
   - 選「那個夢」→ 延伸話題「入學典禮」（觸發 `缺席的典禮`）
   - 選其他話題（維持甜苦平衡）
   - 選「撫慰鹹粥」（平衡料理）

3. **Day 3 - 驗證結局**

**預期結果**：
- ✅ 結局名稱：「遲來的出席」
- ✅ 黑貓評論：「他終於到場了。遲到十五年，但到了。有些補償，晚一點也是補償。」
- ✅ 遺物描述：「遲到了十五年的出席。這一次，爸爸沒有缺席。」
- ✅ 告別對話包含：「我不去入學典禮是錯的。但這件婚紗，是我遲來的道歉。」

---

### ✅路線 D：苦味 + 銀座的驕傲

**目標**：驗證「職人的輓歌」結局

**操作步驟**：

1. **Day 1**
   - 選「銀座生意好嗎？」→ **延伸話題**（觸發 `銀座的驕傲`）
   - 選「他怎麼來的？」（收集苦味）
   - 選「做一碗熱湯」

2. **Day 2**
   - 選苦味話題（「怎麼死的」、「雪夜」等）
   - 選「苦辛醒神湯」

3. **Day 3 - 驗證結局**

**預期結果**：
- ✅ 結局名稱：「職人的輓歌」
- ✅ 黑貓評論：「把一輩子縫進了針線裡，卻縫不住自己的家。」
- ✅ 遺物描述：「縫過首相西裝的針。最後孤獨地斷在了雪地裡。」

---

### 路線 E：平衡 + 銀座的驕傲

**目標**：驗證「傳承的針線」結局

**操作步驟**：

1. **Day 1**
   - 選「銀座生意好嗎？」→ 延伸話題（觸發 `銀座的驕傲`）
   - 選其他混合話題
   - 選「做一碗熱湯」或不做

2. **Day 2**
   - 選混合話題
   - 選「撫慰鹹粥」

3. **Day 3 - 驗證結局**

**預期結果**：
- ✅ 結局名稱：「傳承的針線」
- ✅ 黑貓評論：「銀座的驕傲，最後成了女兒的嫁衣。這叫傳承吧。」
- ✅ 遺物描述：「曾經為了銀座而縫，現在只為了一個人的笑容。」

---

### 路線 F：苦味 + 失語

**目標**：驗證「無聲的懺悔」結局

**操作步驟**：

1. **Day 1**
   - 選多個話題收集苦味
   - 選「做一碗熱湯」

2. **Day 2**
   - 選「撫慰鹹粥」（**這會觸發 `失語` 標籤**）
   - 選其他苦味話題

3. **Day 3 - 驗證結局**

**預期結果**：
- ✅ 結局名稱：「無聲的懺悔」
- ✅ 黑貓評論：「他不是不會說話，是不敢說。怕說錯，所以乾脆不說。最後連對不起都來不及。」
- ✅ 遺物描述：「說不出口的對不起，和這根針一起生鏽了。」

---

### 路線 G：平衡 + 全收集（3+ 變體）

**目標**：驗證「完整的告別」結局（全收集專屬）

**操作步驟**：

1. **Day 1**
   - 選「銀座生意好嗎？」→ 延伸話題（✅ 銀座的驕傲）
   - 選「你的手」→ 延伸話題「空蕩的店」（✅ 空蕩的店）
   - 選「做一碗熱湯」

2. **Day 2**
   - 選「那個夢」→ 延伸話題「入學典禮」（✅ 缺席的典禮）
   - 選「撫慰鹹粥」（✅ 失語）

3. **Day 3 - 驗證結局**

**預期結果**：
- ✅ 觸發全收集（4 個變體記憶 >= 3）
- ✅ 結局名稱：「完整的告別」
- ✅ 黑貓評論：「他把一生都攤開了。銀座、典禮、雪子、那間店...全都記起來了。能這樣離開，是福氣。」
- ✅ 遺物描述：「職人、父親、丈夫。這根針，縫起了他的一生。」
- ✅ 告別對話：專屬全收集對話（「我全都記起來了...」）

---

### 路線 H：苦味 + 全收集

**目標**：驗證「職人的一生」結局（全收集苦味版）

**操作步驟**：

1. **Day 1**
   - 選「銀座生意好嗎？」→ 延伸話題（✅ 銀座的驕傲）
   - 選「你的手」→ 延伸話題「空蕩的店」（✅ 空蕩的店）
   - 選「他怎麼來的？」（收集苦味）
   - 選「做一碗熱湯」

2. **Day 2**
   - 選「那個夢」→ 延伸話題「入學典禮」（✅ 缺席的典禮）
   - 選「怎麼死的」等苦味話題
   - 選「苦辛醒神湯」（加強苦味）

3. **Day 3 - 驗證結局**

**預期結果**：
- ✅ 結局名稱：「職人的一生」
- ✅ 黑貓評論：「職人、父親、丈夫、時代的棄子。每一個身份都有遺憾。但他都記起來了。這樣...也算完整吧。」
- ✅ 遺物描述：「一生的重量，都在這根針上。它撐不住了。」

---

### 路線 I：甜味 + 無變體

**目標**：驗證預設的「溫柔的夢境」結局

**操作步驟**：

1. **Day 1**
   - 只選基本話題（不觸發延伸話題）
   - 不做料理

2. **Day 2**
   - 選「那個夢」但**不選延伸話題**
   - 選其他甜味話題（「第一次叫爸爸」等）
   - 選「蜜汁燉菜」

3. **Day 3 - 驗證結局**

**預期結果**：
- ✅ 結局名稱：「溫柔的夢境」（預設甜味）
- ✅ 黑貓評論：「他走的時候，是笑著的。這樣也好吧。」
- ✅ 遺物描述：「父女的合照。照片裡的小女孩，笑得很甜。」

---

## 測試檢查清單

### 每條路線需驗證

- [ ] 結局名稱是否正確
- [ ] 黑貓評論是否正確
- [ ] 遺物描述是否正確
- [ ] 告別對話中是否包含變體對話
- [ ] 最終章是否顯示動態引言

### 全收集特殊驗證（路線 G、H）

- [ ] 是否觸發全收集專屬對話（「我全都記起來了」）
- [ ] 是否覆蓋單個變體對話
- [ ] 專屬結局名稱是否正確

---

## 快速測試（DEBUG 模式）

如果啟用 `DEBUG_MODE = true`，可以跳過跨日鎖定：

```javascript
const CONFIG = {
  // ...
  DEBUG_MODE: true  // 允許同一天推進多個 Day
};
```

這樣就可以在幾分鐘內完成一條完整路線測試。

---

## 問題回報格式

如果發現問題，請記錄：

1. **路線編號**：（如 路線 A）
2. **問題描述**：（如「結局名稱顯示錯誤」）
3. **預期結果**：（如「應該顯示『缺席的代價』」）
4. **實際結果**：（如「顯示『帶遺憾離去』」）
5. **收集的記憶標籤**：（截圖或文字列表）

---

**測試愉快！** 🎮
