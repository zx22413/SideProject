# 田中太郎 - 劇情流程圖（橫向×五味版）

> **依據**：[[../00-核心企劃/當前專案_靈魂食堂/田中太郎_橫向與五味結構]]、[[田中太郎_人生紀實整合建議]]  
> **最後更新**：2026-01-25

---

## 一、主線流程（含橫向軸與料理分支）

```mermaid
flowchart TD
    subgraph Opening["🎬 開場"]
        A1[雨聲 / 玩家醒來] --> A2[黑貓登場]
        A2 --> A3["「等等會有客人來」"]
        A3 --> A4["[這裡是...？]"]
    end

    subgraph Day1Night["🌙 Day 1 - Night 22:30"]
        B1[門被推開] --> B2[老人登場]
        B2 --> B3["「...冷...」"]
        B3 --> B4["[👁️ 觀察他]"]
        B4 --> B5["【看向老人】過渡文字"]
    end

    subgraph Day1Day["☀️ Day 1 - Day Shift（話題選擇 = 點亮橫向軸）"]
        C0[話題選擇] --> C1["🗨️ 你的手<br/>→ A 職人 + E 死亡<br/>獲得：針、縫線、寒冷、裁縫手藝"]
        C0 --> C2["🗨️ 你從哪裡來<br/>→ D 衰敗<br/>獲得：失憶、迷茫"]
        C0 --> C3["🗨️ 窗外的雨<br/>→ D 衰敗<br/>獲得：雨聲、潮濕"]
        C0 --> C4["🤐 沉默陪伴<br/>→ B 雪子 + C 美雪<br/>獲得：寧靜、陪伴"]
        
        C1 --> C5["[🍳 進入廚房]"]
        C2 --> C5
        C3 --> C5
        C4 --> C5
    end

    subgraph Day1Cook["🍳 Day 1 - Cooking（食材 → 料理 → 刺激 → 解鎖劇情）"]
        D1[廚房場景<br/>顯示已收集食材] --> D2{依食材判斷可做料理}
        
        D2 -->|有 寒冷/針/縫線| D3["☕ 熱茶<br/>刺激：撫慰+根源<br/>解鎖：小小的手捧茶<br/>（B 雪子軸）"]
        D2 -->|有 雨聲/失憶/迷茫| D4["🍜 熱湯<br/>刺激：清醒+收斂<br/>解鎖：在店裡迷路<br/>（D 衰敗軸）"]
        
        D3 --> D5[記憶劇場：深夜閣樓]
        D4 --> D6[記憶劇場：空蕩工房]
        
        D5 --> D7[Day 1 結束]
        D6 --> D7
    end

    subgraph Day2Day["☀️ Day 2 - Day Shift（深化橫向軸）"]
        E0["「我做了一個夢...」"] --> E1["💭 那個夢<br/>→ B 雪子 + C 美雪<br/>Part1: 蜜糖笑容<br/>Part2: 女兒-美雪<br/>Part3: 婚紗+眼淚"]
        E0 --> E2["🔍 你在找什麼<br/>→ E 死亡 + A 職人<br/>獲得：執念、婚紗"]
        E0 --> E3["❄️ 你怎麼來的<br/>→ E 死亡 + D 衰敗<br/>獲得：雪、死亡"]
        
        E1 --> E4["[🍳 進入廚房]"]
        E2 --> E4
        E3 --> E4
    end

    subgraph Day2Cook["🍳 Day 2 - Cooking（多料理選項）"]
        F1[廚房場景<br/>食材變多了] --> F2{依食材判斷可做料理}
        
        F2 -->|有 蜜糖笑容+眼淚| F3["🍜 蜜汁燉菜<br/>刺激：撫慰+宣洩<br/>解鎖：又甜又鹹、便當太甜<br/>（B+C 軸）"]
        F2 -->|有 執念+雪/死亡| F4["🥣 苦辛醒神湯<br/>刺激：清醒+收斂<br/>解鎖：最後一針、雪中<br/>（E+A+D 軸）"]
        F2 -->|有 寧靜+陪伴| F5["🍲 撫慰鹹粥<br/>刺激：撫慰+根源<br/>解鎖：雪子靜靜陪伴<br/>（B+C 軸）"]
        
        F3 --> F6[記憶劇場：便當太甜/入學典禮]
        F4 --> F7[記憶劇場：最後一針/雪中]
        F5 --> F8[記憶劇場：雪子陪伴]
        
        F6 --> F9[Day 2 After]
        F7 --> F9
        F8 --> F9
    end

    subgraph Day2After["🌃 Day 2 - After"]
        G1["「我記起來了...」"] --> G2["[最後一天]"]
        G2 --> G3["【第三天】過渡"]
        G3 --> G4["黑貓：「準備好了嗎？」"]
    end

    subgraph Day3["⭐ Day 3 - 最終章（五味結算）"]
        H1[最終料理場景] --> H2["🐟 蜜汁炙燒鹹魚<br/>（全食材融合）"]
        H2 --> H3[五味結算<br/>calculateFlavorBalance]
        H3 --> H4{結局判定}
        
        H4 -->|苦味過重| H5["帶遺憾離去<br/>遺物：彎曲的針"]
        H4 -->|回甘平衡| H6["釋懷離去<br/>遺物：銀頂針"]
        H4 -->|甜味過重| H7["沉浸美好<br/>遺物：泛黃照片"]
        
        H5 --> H8[告別]
        H6 --> H8
        H7 --> H8
        
        H8 --> H9[昇華]
    end

    Opening --> Day1Night
    Day1Night --> Day1Day
    Day1Day --> Day1Cook
    Day1Cook --> Day2Day
    Day2Day --> Day2Cook
    Day2Cook --> Day2After
    Day2After --> Day3

    style Opening fill:#2d3436,color:#fff
    style Day1Night fill:#636e72,color:#fff
    style Day1Day fill:#fdcb6e,color:#000
    style Day1Cook fill:#e17055,color:#fff
    style Day2Day fill:#fdcb6e,color:#000
    style Day2Cook fill:#e17055,color:#fff
    style Day2After fill:#6c5ce7,color:#fff
    style Day3 fill:#d63031,color:#fff
```

---

## 二、橫向軸 × 話題 × 標籤（側寫角度）

```mermaid
flowchart LR
    subgraph Axes["五條橫向軸（側寫角度）"]
        A["A 職人驕傲<br/>鹹、苦"]
        B["B 雪子翻譯<br/>甜、鹹、酸"]
        C["C 美雪裂痕<br/>甜、辛、酸"]
        D["D 衰敗孤獨<br/>苦、酸"]
        E["E 死亡救贖<br/>苦、酸、甜"]
    end

    subgraph Day1Topics["Day 1 話題"]
        T1["你的手"] -->|點亮| A
        T1 -->|點亮| E
        T2["你從哪裡來"] -->|點亮| D
        T3["窗外的雨"] -->|點亮| D
        T4["沉默陪伴"] -->|點亮| B
        T4 -->|點亮| C
    end

    subgraph Day2Topics["Day 2 話題"]
        T5["那個夢"] -->|點亮| B
        T5 -->|點亮| C
        T6["你在找什麼"] -->|點亮| E
        T6 -->|點亮| A
        T7["你怎麼來的"] -->|點亮| E
        T7 -->|點亮| D
    end

    Axes --> Outcome["不同軸組合<br/>= 不同側寫角度<br/>= 不同理解田中的方式"]

    style A fill:#74b9ff,color:#000
    style B fill:#fd79a8,color:#fff
    style C fill:#fdcb6e,color:#000
    style D fill:#636e72,color:#fff
    style E fill:#d63031,color:#fff
    style Outcome fill:#00b894,color:#fff
```

---

## 三、食材 → 料理 → 刺激 → 解鎖劇情（料理鏈）

```mermaid
flowchart TD
    subgraph Ingredients["話題 → 採集標籤（食材）"]
        I1["你的手<br/>→ 針、縫線、寒冷、裁縫手藝"]
        I2["沉默陪伴<br/>→ 寧靜、陪伴"]
        I3["那個夢<br/>→ 蜜糖笑容、女兒-美雪、婚紗、眼淚"]
        I4["你在找什麼<br/>→ 執念、婚紗"]
        I5["你怎麼來的<br/>→ 雪、死亡"]
    end

    subgraph Kitchen["廚房：依食材動態顯示可做料理"]
        K1{Day 1 廚房}
        K2{Day 2 廚房}
        
        K1 -->|有 寒冷/針/縫線| D1["☕ 熱茶"]
        K1 -->|有 雨聲/失憶| D2["🍜 熱湯"]
        
        K2 -->|有 蜜糖+眼淚| D3["🍜 蜜汁燉菜"]
        K2 -->|有 執念+雪/死亡| D4["🥣 苦辛醒神湯"]
        K2 -->|有 寧靜+陪伴| D5["🍲 撫慰鹹粥"]
    end

    subgraph Stimulus["料理 = 刺激（自白劑）"]
        D1 --> S1["撫慰+根源<br/>撬開：被愛的瞬間"]
        D2 --> S2["清醒+收斂<br/>撬開：遺憾、對不起"]
        D3 --> S3["撫慰+宣洩<br/>撬開：落淚、說出壓抑"]
        D4 --> S4["清醒+收斂<br/>撬開：承認死亡、執念"]
        D5 --> S5["撫慰+根源<br/>撬開：被聆聽、接納"]
    end

    subgraph Unlock["解鎖劇情（來自人生紀實）"]
        S1 --> U1["小小的手捧茶<br/>雪子「手會說話」<br/>（B 雪子軸）"]
        S2 --> U2["在店裡迷路<br/>想不起來<br/>（D 衰敗軸）"]
        S3 --> U3["便當太甜<br/>入學典禮<br/>（C 美雪軸）"]
        S4 --> U4["最後一針<br/>雪中<br/>（E 死亡軸）"]
        S5 --> U5["雪子靜靜陪伴<br/>（B 雪子軸）"]
    end

    Ingredients --> Kitchen
    Kitchen --> Stimulus
    Stimulus --> Unlock

    style Ingredients fill:#74b9ff,color:#000
    style Kitchen fill:#e17055,color:#fff
    style Stimulus fill:#fd79a8,color:#fff
    style Unlock fill:#00b894,color:#fff
```

---

## 四、五味結算 → 結局分支

```mermaid
flowchart TD
    subgraph Collection["收集路線"]
        C1["只做 Day 1 + 少量 Day 2<br/>→ A, D 為主"]
        C2["Day 1 全收 + Day 2「那個夢」完整<br/>→ B, C 強；A, E 有"]
        C3["只收「那個夢」甜系<br/>→ B, C 強；D, E 弱"]
        C4["大量「你的手」「你怎麼來的」<br/>→ A, D, E 強；B, C 弱"]
    end

    subgraph Flavor["五味傾向"]
        C1 --> F1["苦、鹹、酸偏高"]
        C2 --> F2["甜、鹹平衡；苦酸不過高"]
        C3 --> F3["甜味過重"]
        C4 --> F4["苦、酸高"]
    end

    subgraph Calculation["五味結算<br/>calculateFlavorBalance"]
        F1 --> Calc[累加所有標籤的五味數值]
        F2 --> Calc
        F3 --> Calc
        F4 --> Calc
    end

    subgraph Ending["結局判定<br/>determineEnding"]
        Calc --> E1{判定邏輯}
        
        E1 -->|苦味過重<br/>bitter > sweet + salty| E2["帶遺憾離去<br/>（普通結局）<br/>遺物：彎曲的針"]
        E1 -->|回甘平衡<br/>sweet + salty ≥ bitter + sour| E3["釋懷離去<br/>（真結局）<br/>遺物：銀頂針"]
        E1 -->|甜味過重<br/>sweet > 其餘總和| E4["沉浸美好<br/>（特殊結局）<br/>遺物：泛黃照片"]
    end

    Collection --> Flavor
    Flavor --> Calculation
    Calculation --> Ending

    style Collection fill:#74b9ff,color:#000
    style Flavor fill:#fdcb6e,color:#000
    style Calculation fill:#e17055,color:#fff
    style Ending fill:#d63031,color:#fff
```

---

## 五、記憶食材收集表（含橫向軸標註）

```mermaid
flowchart LR
    subgraph Day1["Day 1 話題（基礎層）"]
        T1["🗨️ 你的手<br/>A+E 軸"] --> M1["🪡 針（苦鹹）<br/>🧵 縫線（甜鹹）<br/>❄️ 寒冷（苦酸）<br/>🧤 裁縫手藝（甜鹹）"]
        T2["🗨️ 你從哪裡來<br/>D 軸"] --> M2["🌫️ 失憶（苦酸）<br/>😶 迷茫（苦酸辛）"]
        T3["🗨️ 窗外的雨<br/>D 軸"] --> M3["🌧️ 雨聲（苦辛鹹）<br/>💧 潮濕（苦酸辛）"]
        T4["🤐 沉默陪伴<br/>B+C 軸"] --> M4["🤫 寧靜（甜苦鹹）<br/>🤝 陪伴（甜鹹）"]
    end

    subgraph Day2["Day 2 話題（深入層）"]
        T5["💭 那個夢<br/>B+C 軸<br/>分3段"] --> M5["🍯 蜜糖笑容（甜鹹）<br/>👧 女兒-美雪（甜酸辛鹹）<br/>💍 婚紗（甜酸苦鹹）<br/>😢 眼淚（酸苦辛）"]
        T6["🔍 你在找什麼<br/>E+A 軸"] --> M6["🎯 執念（酸苦鹹）<br/>💍 婚紗（甜酸苦鹹）"]
        T7["❄️ 你怎麼來的<br/>E+D 軸"] --> M7["❄️ 雪（酸苦辛鹹）<br/>💀 死亡（酸苦）"]
    end

    subgraph Cooking["料理選擇（依食材動態顯示）"]
        M1 --> Cook1["Day 1:<br/>熱茶 / 熱湯"]
        M2 --> Cook1
        M3 --> Cook1
        M4 --> Cook1
        
        M5 --> Cook2["Day 2:<br/>蜜汁燉菜 /<br/>苦辛醒神湯 /<br/>撫慰鹹粥"]
        M6 --> Cook2
        M7 --> Cook2
    end

    subgraph Final["Day 3 最終"]
        Cook1 --> FinalCook["🐟 蜜汁炙燒鹹魚<br/>（全食材融合）"]
        Cook2 --> FinalCook
        FinalCook --> FlavorCalc["五味結算"]
        FlavorCalc --> End["⭐ 結局語氣<br/>+ 遺物"]
    end

    Day1 --> Day2
    Day2 --> Cooking
    Cooking --> Final

    style Day1 fill:#74b9ff,color:#000
    style Day2 fill:#a29bfe,color:#000
    style Cooking fill:#e17055,color:#fff
    style Final fill:#fd79a8,color:#fff
```

---

## 六、橫向軸 × 料理 × 解鎖劇情對照

```mermaid
flowchart TD
    subgraph Axes["橫向軸"]
        A["A 職人驕傲"]
        B["B 雪子翻譯"]
        C["C 美雪裂痕"]
        D["D 衰敗孤獨"]
        E["E 死亡救贖"]
    end

    subgraph Dishes["料理（刺激類型）"]
        D1["☕ 熱茶<br/>撫慰+根源"]
        D2["🍜 熱湯<br/>清醒+收斂"]
        D3["🍜 蜜汁燉菜<br/>撫慰+宣洩"]
        D4["🥣 苦辛醒神湯<br/>清醒+收斂"]
        D5["🍲 撫慰鹹粥<br/>撫慰+根源"]
    end

    subgraph Stories["解鎖的紀實片段"]
        S1["小小的手捧茶<br/>雪子「手會說話」"]
        S2["在店裡迷路<br/>想不起來"]
        S3["便當太甜<br/>入學典禮<br/>美雪畫「爸爸的店」"]
        S4["最後一針<br/>雪中"]
        S5["雪子靜靜陪伴"]
    end

    A --> D1
    A --> D4
    B --> D1
    B --> D3
    B --> D5
    C --> D3
    C --> D5
    D --> D2
    D --> D4
    E --> D1
    E --> D4

    D1 --> S1
    D2 --> S2
    D3 --> S3
    D4 --> S4
    D5 --> S5

    style A fill:#74b9ff,color:#000
    style B fill:#fd79a8,color:#fff
    style C fill:#fdcb6e,color:#000
    style D fill:#636e72,color:#fff
    style E fill:#d63031,color:#fff
    style Stories fill:#00b894,color:#fff
```

---

## 七、擴展方向（已實現 vs 未來）

```mermaid
flowchart TD
    subgraph Current["✅ 目前實作（V4.4）"]
        C1["Day 1 動態話題系統"]
        C2["Day 1 熱茶記憶劇場"]
        C3["Day 2 蜜汁燉菜"]
        C4["Day 3 五味結算"]
        C5["基本橫向軸概念"]
    end

    subgraph MVP["📋 MVP 待實作"]
        M1["Day 2 多料理選項<br/>（蜜汁/苦辛/撫慰）"]
        M2["料理 → 記憶劇場<br/>（便當太甜/最後一針）"]
        M3["Day 3 額外台詞<br/>（依做過料理追加）"]
        M4["橫向軸標註<br/>（話題/標籤/料理）"]
    end

    subgraph Future["🔮 未來擴充（V5.0+）"]
        F1["Day 1 熱湯完整劇場"]
        F2["隱藏話題解鎖<br/>（熱湯+沉默陪伴 → 那個人）"]
        F3["料理失敗/成功"]
        F4["配方變體<br/>（蜜糖+眼淚+雪 → 特殊版）"]
        F5["軸專屬記憶劇場<br/>（B+C 門檻 → 雪子/美雪專場）"]
    end

    Current --> MVP
    MVP --> Future

    style Current fill:#00b894,color:#fff
    style MVP fill:#fdcb6e,color:#000
    style Future fill:#a29bfe,color:#000
```

---

## 八、關鍵設計要點

### 8.1 橫向（側寫角度）

- **話題選擇 = 點亮橫向軸**：選「你的手」多點亮 A、E；選「沉默陪伴」點亮 B、C
- **同一輪不必全點亮**：不同話題組合 = 不同「理解田中的角度」
- **側寫 ≠ 結局分支**：結局仍由五味決定；橫向只影響「玩家看見了哪幾面」

### 8.2 五味（終局語氣）

- **累積機制**：每獲得一個標籤，依 `MEMORY_FLAVOR_MAP` 累加五味
- **結算時機**：Day 3 告別前 `calculateFlavorBalance()` → `determineEnding()`
- **三種結局**：苦味過重（遺憾） / 回甘平衡（釋懷） / 甜味過重（沉浸美好）

### 8.3 料理鏈（食材 → 刺激 → 解鎖）

- **動態顯示**：廚房依 `collectedMemories` 判斷可做料理，不足配方不顯示
- **不同刺激**：選不同料理 → 不同刺激類型 → 解鎖不同紀實片段
- **三種形式**：記憶劇場不同版本 / 額外台詞 / 隱藏話題

---

## 相關文件

- [[../00-核心企劃/當前專案_靈魂食堂/田中太郎_橫向與五味結構]] — 完整架構說明
- [[田中太郎_人生紀實整合建議]] — 紀實片段對應表
- [[../00-核心企劃/當前專案_靈魂食堂/靈魂食堂：最終開發執行企劃書]] — 五味數值對照表
- [[../01-開發實驗/程式碼/靈魂食堂_田中太郎重構版.gs]] — 實作代碼

#tier2/追蹤
